var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(o,l,a)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,s=(e,o)=>{for(var l in o||(o={}))t.call(o,l)&&u(e,l,o[l]);if(a)for(var l of a(o))n.call(o,l)&&u(e,l,o[l]);return e},i=(e,a)=>o(e,l(a));import{u as d,_ as r}from"./wd-message-box.D9o4Qktw.js";import{d as c,a3 as p,r as m,J as v,c as f,C as g,a7 as b,ac as w,b as _,z as h,g as y,w as x,h as V,D as $,i as k,m as j,F as C,n as z,q as K,k as O,j as S,t as P,E as T,a8 as I,B as U,Y as N,Z as F,L as q,e as B,f as E,l as M,K as Q,u as G}from"./index-DDseGw7C.js";import{q as H,e as L,g as Y,l as A,a as D,_ as X}from"./page-wraper.DDC_Z6ly.js";import{b as J,m as W,c as Z,a as R,n as ee,f as oe,w as le,_ as ae}from"./base64.Cmyr0jtN.js";import{p as te,r as ne,c as ue}from"./clickoutside.CJmLG0WC.js";import{u as se}from"./useChildren.CZ9WrgAx.js";import{_ as ie}from"./demo-block.UqcilGKR.js";import{_ as de}from"./wd-slider.-DxcMPSN.js";import{_ as re}from"./wd-button.DAPlZRL9.js";import{w as ce}from"./wd-sort-button.DnUz2rd7.js";import"./wd-input.pmX0Kym8.js";import"./useTranslate.NBovyIC4.js";import"./wd-root-portal.CdNNhO2t.js";import"./useTouch.aWeR6tNq.js";const pe=Symbol("wd-drop-menu"),me=i(s({},J),{zIndex:W(12),direction:R("down"),modal:Z(!0),closeOnClickModal:Z(!0),duration:W(200)}),ve=i(s({},J),{customTitle:R(""),customIcon:R(""),modelValue:[String,Number],options:oe(),disabled:Z(!1),iconName:R("check"),title:String,icon:R("arrow-down"),iconSize:ee,beforeToggle:Function,valueKey:R("value"),labelKey:R("label"),tipKey:R("tip"),customPopupClass:R(""),customPopupStyle:R(""),rootPortal:Z(!1)}),fe=ae(c(i(s({},{name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:ve,emits:["update:modelValue","change","open","opened","close","closed"],setup(e,{expose:o,emit:l}){const a=e,t=l,n=p(H,null),u=m(!1),s=m(!1),i=m(),d=m(12),r=m(0),{parent:c}=L(pe),{proxy:N}=v(),F=f((()=>{let e="";return e=u.value&&c?"down"===c.props.direction?`top: calc(var(--window-top) + ${c.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${c.offset.value}px)`:"",e}));function q(){s.value&&(I(a.beforeToggle)?a.beforeToggle({status:!1,resolve:e=>{e&&B()}}):B())}function B(){s.value&&(s.value=!1)}function E(){s.value||(I(a.beforeToggle)?a.beforeToggle({status:!0,resolve:e=>{e&&M()}}):M())}function M(){u.value=!0,s.value=!0,c&&(r.value=Number(c.props.duration),i.value="down"===c.props.direction?"top":"bottom")}function Q(){u.value=!1,t("closed")}function G(){t("open")}function A(){t("opened")}function D(){t("close")}return g((()=>a.modelValue),(e=>{U(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),b((()=>{n&&n.pushToQueue?n.pushToQueue(N):te(N)})),w((()=>{n&&n.removeFromQueue?n.removeFromQueue(N):ne(N)})),o({getShowPop:function(){return s.value},open:E,close:q,toggle:function(){s.value?q():E()}}),(e,o)=>{const l=O,n=k;return u.value?(y(),_(n,{key:0,class:K(`wd-drop-item  ${e.customClass}`),style:T(`pointer-events: none; z-index: ${d.value}; ${F.value};${e.customStyle}`)},{default:x((()=>[V(Y,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),"z-index":d.value,duration:r.value,position:i.value,"custom-style":`position: absolute; pointer-events: auto; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,modal:!1,"close-on-click-modal":!1,"root-portal":e.rootPortal,onBeforeEnter:G,onAfterEnter:A,onBeforeLeave:D,onAfterLeave:Q},{default:x((()=>[e.options.length?(y(),_(n,{key:0},{default:x((()=>[(y(!0),j(C,null,z(e.options,((o,u)=>(y(),_(n,{key:u,onClick:e=>function(e){if(a.disabled)return;const{valueKey:o}=a,l=a.options[e],n=void 0!==l[o]?l[o]:l;t("update:modelValue",n),t("change",{value:n,selectedItem:l}),q()}(u),class:K("wd-drop-item__option "+((""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?"is-active":""))},{default:x((()=>[V(n,{class:K(`wd-drop-item__title ${e.customTitle}`)},{default:x((()=>[V(l,null,{default:x((()=>[S(P(o[e.labelKey]?o[e.labelKey]:o),1)])),_:2},1024),o[e.tipKey]?(y(),_(l,{key:0,class:"wd-drop-item__tip"},{default:x((()=>[S(P(o[e.tipKey]),1)])),_:2},1024)):h("",!0)])),_:2},1032,["class"]),(""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?(y(),_(le,{key:0,name:e.iconName,"custom-class":`wd-drop-item__icon ${e.customIcon}`},null,8,["name","custom-class"])):h("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):$(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class","root-portal"])])),_:3},8,["class","style"])):h("",!0)}}})),[["__scopeId","data-v-02131c63"]]),ge=ae(c(i(s({},{name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:me,setup(e){const o=e,l=p(H,null),a=m(`dropMenuId${N()}`),t=m(0),n=m(0),u=f((()=>"down"===o.direction?`top: calc(var(--window-top) + ${t.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${t.value}px)`)),{proxy:s}=v(),{linkChildren:i,children:d}=se(pe),r=f((()=>d.some((e=>e.$.exposed.getShowPop())))),c=m(!1);let w;function O(){}function I(e){const{title:o,modelValue:l,options:a,valueKey:t,labelKey:n}=e;if(o)return o;for(let u=0,s=a.length;u<s;u++)if(l===a[u][t])return a[u][n];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function U(e){q(`#${a.value}`,!1,s).then((l=>{if(!l)return;const{top:a,bottom:u}=l;"down"===o.direction?t.value=Number(u):t.value=n.value-Number(a),e.$.exposed.toggle()}))}function G(){o.closeOnClickModal&&d.forEach((e=>{e.$.exposed.close()}))}return g(r,(e=>{w&&clearTimeout(w),e?c.value=!0:w=setTimeout((()=>{c.value=!1,w=null}),16)})),i({props:o,fold:U,offset:t}),g((()=>o.direction),(e=>{["up","down"].includes(e)||console.error("[wot ui] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),b((()=>{n.value=F().windowHeight})),(e,o)=>{const t=k,n=B(E("wd-icon"),le);return y(),_(t,{style:T(e.customStyle),class:K(`wd-drop-menu ${e.customClass}`),onClick:Q(O,["stop","prevent"]),id:a.value},{default:x((()=>[e.modal?(y(),_(A,{key:0,show:c.value,duration:e.duration,"z-index":12,"custom-style":u.value,onClick:G,onTouchmove:O},null,8,["show","duration","custom-style"])):h("",!0),V(t,{class:"wd-drop-menu__list"},{default:x((()=>[(y(!0),j(C,null,z(M(d),((e,o)=>(y(),_(t,{key:o,onClick:o=>function(e){e&&!e.disabled&&(l&&l.closeOther?l.closeOther(e):ue(e),U(e))}(e),class:K(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:x((()=>[V(t,{class:"wd-drop-menu__item-title"},{default:x((()=>[V(t,{class:"wd-drop-menu__item-title-text"},{default:x((()=>[S(P(I(e)),1)])),_:2},1024),V(n,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),$(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}})),[["__scopeId","data-v-b41e9b4f"]]),be=ae(c({__name:"Index",setup(e){const{t:o}=G(),l=d(),a=m(),t=m(),n=m(30),u=m(1),s=m(0),i=m(0),c=m(0),p=m(0),v=m(0),f=m(0),g=m(0),b=m(0),w=m(0),h=m([{label:o("quan-bu-shang-pin"),value:0},{label:o("xin-kuan-shang-pin"),value:1,tip:o("zhe-shi-bu-chong-xin-xi")},{label:o("zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian-zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian"),value:2}]),$=m([{label:o("zong-he"),value:0},{label:o("xiao-liang"),value:1},{label:o("shang-jia-shi-jian"),value:2}]);function j(){var e;null==(e=t.value)||e.initSlider()}function C({value:e}){console.log(e)}function z({value:e}){console.log(e)}function K({value:e}){console.log(e)}function O({value:e}){console.log(e)}function T({value:e}){console.log(e)}function I({value:e}){console.log(e)}function U({value:e}){console.log(e)}function N({value:e}){console.log(e)}function F({value:e}){console.log(e)}function q(){a.value.close()}const M=({status:e,resolve:a})=>{l.confirm({title:`${o(e?"yi-bu-da-kai":"yi-bu-guan-bi")}`,msg:`${o(e?"que-ding-yao-da-kai-xia-la-cai-dan-ma":"que-ding-yao-guan-bi-xia-la-cai-dan-ma")}`}).then((()=>{a(!0)})).catch((()=>{a(!1)}))};return(e,o)=>{const l=B(E("wd-message-box"),r),d=k,m=B(E("wd-drop-menu-item"),fe),G=B(E("wd-drop-menu"),ge),H=B(E("demo-block"),ie),L=B(E("wd-slider"),de),Y=B(E("wd-cell"),X),A=B(E("wd-button"),re),J=B(E("wd-sort-button"),ce),W=B(E("page-wraper"),D);return y(),_(W,null,{default:x((()=>[V(d,{onClick:o[0]||(o[0]=Q((()=>{}),["stop"]))},{default:x((()=>[V(l)])),_:1}),V(d,{class:"demo-body"},{default:x((()=>[V(H,{title:e.$t("jiBenYongFa"),transparent:""},{default:x((()=>[V(G,null,{default:x((()=>[V(m,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),options:h.value,onChange:C},null,8,["modelValue","options"]),V(m,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value=e),options:$.value,onChange:z},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("zi-ding-yi-cai-dan-nei-rong"),transparent:""},{default:x((()=>[V(G,null,{default:x((()=>[V(m,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=e=>i.value=e),options:h.value,onChange:K},null,8,["modelValue","options"]),V(m,{ref_key:"dropMenu",ref:a,title:e.$t("shai-xuan"),onOpened:j},{default:x((()=>[V(d,null,{default:x((()=>[V(L,{modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value=e),ref_key:"slider",ref:t},null,8,["modelValue"]),V(Y,{title:e.$t("biao-ti-wen-zi-10"),value:e.$t("nei-rong")},null,8,["title","value"]),V(Y,{title:e.$t("biao-ti-wen-zi-10"),label:e.$t("miaoShuXinXi-0"),value:e.$t("nei-rong")},null,8,["title","label","value"]),V(d,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:x((()=>[V(A,{block:"",size:"large",onClick:q},{default:x((()=>[S(P(e.$t("zhu-yao-an-niu")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("zi-ding-yi-cai-dan-xuan-xiang"),transparent:""},{default:x((()=>[V(d,{class:"custom-menu"},{default:x((()=>[V(G,{"custom-style":"flex: 1; min-width: 0"},{default:x((()=>[V(m,{modelValue:c.value,"onUpdate:modelValue":o[5]||(o[5]=e=>c.value=e),options:h.value,onChange:O},null,8,["modelValue","options"])])),_:1}),V(d,{style:{flex:"1"}},{default:x((()=>[V(J,{modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e),title:e.$t("shang-jia-shi-jian"),onChange:T},null,8,["modelValue","title"])])),_:1})])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("zi-ding-yi-cai-dan-tu-biao"),transparent:""},{default:x((()=>[V(G,null,{default:x((()=>[V(m,{title:e.$t("di-tu"),icon:"location","icon-size":"14px"},null,8,["title"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("yi-bu-da-kai-guan-bi"),transparent:""},{default:x((()=>[V(G,null,{default:x((()=>[V(m,{modelValue:w.value,"onUpdate:modelValue":o[7]||(o[7]=e=>w.value=e),options:h.value,onChange:C,"before-toggle":M},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("xiang-shang-dan-chu"),transparent:""},{default:x((()=>[V(G,{direction:"up"},{default:x((()=>[V(m,{modelValue:v.value,"onUpdate:modelValue":o[8]||(o[8]=e=>v.value=e),options:h.value,onChange:I,"custom-title":"custom-title","custom-icon":"custom-icon"},null,8,["modelValue","options"]),V(m,{modelValue:f.value,"onUpdate:modelValue":o[9]||(o[9]=e=>f.value=e),options:$.value,onChange:U},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),V(H,{title:e.$t("jinYong"),transparent:""},{default:x((()=>[V(G,{direction:"up"},{default:x((()=>[V(m,{modelValue:g.value,"onUpdate:modelValue":o[10]||(o[10]=e=>g.value=e),disabled:"",options:h.value,onChange:N},null,8,["modelValue","options"]),V(m,{modelValue:b.value,"onUpdate:modelValue":o[11]||(o[11]=e=>b.value=e),options:$.value,onChange:F},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-c5279a60"]]);export{be as default};
